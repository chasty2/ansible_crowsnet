---
# vars file for proxmox role
proxmox_packages:
  - nfs-kernel-server

proxmox_services:
  - nfs-kernel-server

proxmox_ports:
  - 8006/tcp # proxmox web app
  - 2049/tcp # nfs

# 770 on this directory restricts access to authorized users, but
# won't affect permissions of container data within the directory
proxmox_nfs_mounts:
  - { path: "/hdd_mirror/media", owner: podman,
      group: podman, mode: "0770" }
  - { path: "/ssd_mirror/jellyfin", owner: podman,
      group: podman, mode: "0770" }
  - { path: "/ssd_mirror/proxy", owner: podman,
      group: podman, mode: "0770" }
  - { path: "/ssd_mirror/foundry", owner: podman,
      group: podman, mode: "0770" }

# 0 = Sunday, 1 = Monday, ..., 6 = Saturday
proxmox_cron_jobs:
  - { name: "Backup jellyfin config data, daily at 12AM",
      minute: "0",
      hour: "0",
      weekday: "*",
      job: "/root/backup.sh jellyfin /ssd_mirror/jellyfin"
  }
  - { name: "Backup proxy config data, daily at 1215AM",
      minute: "15",
      hour: "0",
      weekday: "*",
      job: "/root/backup.sh proxy /ssd_mirror/proxy"
  }
  - { name: "Backup foundry config data, daily at 1230AM",
      minute: "30",
      hour: "0",
      weekday: "*",
      job: "/root/backup.sh foundry /ssd_mirror/foundry"
  }
  - { name: "Backup media, Monday at 3AM",
      minute: "0",
      hour: "3",
      weekday: "1",
      job: "/root/backup.sh media /hdd_mirror/media"
  }
  - { name: "Trim ssd_mirror pool, Wednesday at 3AM",
      minute: "0",
      hour: "3",
      weekday: "3",
      job: "/usr/sbin/zpool trim ssd_mirror"
  }

proxmox_pbs_repository: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  31353136643532373737396262666633323539663734623935633561356462356439343938343666
  3063396530396563393965656639333964366164343664330a666665373165313032613564393261
  66656239373839306638623539303034656431343236383036623162333030353035326166623465
  6563383832303937350a343334633439303563363064663564333364633562643833663465326430
  31656131326635303238313261616631613837373162316430313130653631623434

proxmox_pbs_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  66326434633565653732646365383535363930373661623534373837393165636364626337633637
  3063323164666433333463343234313730663236396437350a666539383064653830366635353161
  33653361343061303066336230326636326435316662323037363739616331616364663138306634
  3330623466646434650a313663383365326261663836646165383336633038353739663064346466
  34356339636336373331633139393335363861393362353337656464623530623462
